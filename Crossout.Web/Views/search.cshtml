@{
    Layout = "layout.cshtml";
}

@using Crossout.Model.Items
@using Crossout.Web
@using Crossout.Web.Models
@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<Crossout.Web.Models.SearchModel>


@Html.Partial("header", Model)

@Html.Partial("status", Model.Status)

<div class="well well-sm">
    <div class="row">
        @Html.Partial("filter", Model)
    </div>
</div>

<table id="ItemTable" class="table table-striped table-hover table-condensed">
    <thead>
        <tr>
            <th>
                Name
            </th>
            <th>
                Rarity
            </th>
            <th class="text-right">
                Sell Price
            </th>
            <th class="text-right">
                Sell Offers
            </th>
            <th class="text-right">
                Buy Price
            </th>
            <th class="text-right">
                Buy Orders
            </th>
            <th class="text-right">
                Margin
            </th>
            <th class="text-right">
                Last Update
            </th>
        </tr>
    </thead>

    <tbody>
        @foreach (Item item in Model.SearchResult)
        {
            @Html.Partial("itempart", item)
        }
    </tbody>
</table>

<div class="well well-sm">
    <div class="row">
        @Html.Partial("filter", Model)
    </div>
</div>

<script>
    $(document).ready(function () {

        var domOption =
            "<'container-fluid well well-sm'<'row'<'col-sm-6'p><'col-sm-4'f><'col-sm-2'l>>>" +
            "<'row'<'col-sm-12'tr>>" +
            "<'container-fluid well well-sm'<'row'<'col-sm-6'p><'col-sm-4'i><'col-sm-2'l>>>";

        $.fn.DataTable.ext.pager.numbers_length = 10;

        $('#ItemTable').DataTable({
            paging: true,
            searching: true,
            pageLength: 8,
            order: [[3, "desc"]],
            lengthMenu: [[10,20, 50, -1], [10,20, 50, "All"]],
            pagingType: "full_numbers",
            //dom: '<"top"><"clear">lpt<"bottom">p'
            dom: domOption
        });
    });
</script>
