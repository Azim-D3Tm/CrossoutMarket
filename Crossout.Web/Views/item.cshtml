@{
    Layout = "layout.cshtml";
}

@using System.Collections.Generic
@using System.Linq
@using Crossout.Model.Recipes
@using Crossout.Web
@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<Crossout.Web.Models.ItemModel>

@Html.Partial("header", null)

<div class="panel">
    <div class="panel-body">
        <table class="table table-striped table-hover table-condensed">
            <thead>
            <tr>
                <th>
                    Name
                </th>
                <th>
                    Rarity
                </th>
                <th>
                    Sell Price
                </th>
                <th>
                    Sell Offers
                </th>
                <th>
                    Buy Price
                </th>
                <th>
                    Buy Orders
                </th>
                <th>
                    Margin
                </th>
            </tr>
            </thead>

            <tbody>
            @Html.Partial("recipepart", Model.Recipe.Recipe)

            @ShowTree(Model.Recipe.Recipe.Ingredients)

            @helper ShowTree(List<RecipeItem> items)
            {
                foreach (RecipeItem item in items)
                {
                    @Html.Partial("recipepart", item)
                    if (item != null && item.Ingredients.Count > 0)
                    {
                        @ShowTree(item.Ingredients);
                    }
                }
            }
            </tbody>
        </table>
    </div>
</div>
@Html.Partial("chart", Model)